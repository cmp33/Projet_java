package ui;import BDD.Connexion;import javax.swing.*;import java.awt.*;import java.sql.ResultSet;import java.sql.ResultSetMetaData;import java.sql.SQLException;import java.sql.Statement;public class Table extends JPanel {     JTable result;    public Table(String query, String[] columnName) {        try {            setLayout(new FlowLayout());            //On crée un statement            Statement state = Connexion.getInstance().createStatement(ResultSet.TYPE_SCROLL_INSENSITIVE, ResultSet.CONCUR_READ_ONLY);            //On exécute la requête            ResultSet res = state.executeQuery(query);            //Temps d'exécution            //On récupère les meta afin de récupérer le nom des colonnes            ResultSetMetaData meta = res.getMetaData();/*            //On initialise un tableau d'Object pour les en-têtes du tableau            Object[] column = new Object[columnName.length];            System.out.println(Arrays.toString(column));            for(int i = 1 ; i <= meta.getColumnCount(); i++) {                column[i - 1] = meta.getColumnName(i);                //System.out.println();            }*/            //Petite manipulation pour obtenir le nombre de lignes            res.last();            int rowCount = res.getRow();            Object[][] data = new Object[res.getRow()][columnName.length];            //On revient au départ            res.beforeFirst();            int j = 1;            //On remplit le tableau d'Object[][]            while(res.next()){                for(int i = 1 ; i <= meta.getColumnCount(); i++)                    data[j - 1][i - 1] = res.getObject(i);                j++;            }            result = new JTable(data, columnName);            result.setPreferredScrollableViewportSize(new Dimension(1050, 550));            result.setFillsViewportHeight(true);            JScrollPane scrollPane = new JScrollPane(result);            add(scrollPane);        } catch (SQLException e) {            //Dans le cas d'une exception, on affiche une pop-up et on efface le contenu            result.removeAll();            result.add(new JScrollPane(new JTable()), BorderLayout.CENTER);            result.revalidate();            JOptionPane.showMessageDialog(null, e.getMessage(), "ERREUR ! ", JOptionPane.ERROR_MESSAGE);            System.out.println("Erreur Table()");        }    }    /* //Affiche le tableau    public static void main(String[] args) {        Table gui = new Table("SELECT * FROM tableau");        gui.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);        gui.setSize(600, 200);        gui.setVisible(true);    }    */}